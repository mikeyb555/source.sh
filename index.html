
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>


<meta charset="utf-8">
<meta http-equiv="cleartype" content="on">

<title>A Tech Blog by Jake Zimmerman - The Source.sh</title>
<meta name="author" content="MichaelB">




<meta name="description" content="A tech blog by Jake Zimmerman. Updates occaisonally with tips, tricks, and hacks that have helped me out.">

<meta name="keywords" content="Jekyll theme themes responsive blog modern tech hacks ">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Twitter Cards -->


<!-- Open Graph -->
<meta property="og:local" content="en_US">
<meta property="og:type" content="article">
<meta property="og:url" content="http://mikeyb555.github.io/source">
<meta property="og:title" content="A Tech Blog by Jake Zimmerman">
<meta property="og:description" content="A tech blog by Jake Zimmerman. Updates occaisonally with tips, tricks, and hacks that have helped me out.">

  <meta property="og:image" content="/images/threaded-blue-on-black-cropped.jpg">

<meta property="og:site_name" content="The Source.sh">

<link rel="canonical" href="http://mikeyb555.github.io/source">
<link href="/favicon.png" rel="icon">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="/atom.xml" rel="alternate" title="The Source.sh" type="application/atom+xml">

<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
<script>Modernizr || document.write('<script src="/javascripts/vendor/modernizr-2.6.2.custom.min.js"><\/script>') </script>



<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


</head>

<body id="post-index" class="feature">
  <!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
  <nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="" alt="MichaelB photo" class="author-photo">
					<h4>MichaelB</h4>
					<p></p>
				</li>
				
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/categories/">All Categories</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


  <div class="entry-header">
    
    
      <div class="entry-image">
        <img src="/images/threaded-blue-on-black-cropped.jpg" alt="A Tech Blog by Jake Zimmerman">
      </div><!-- /.entry-image -->
    
    <div class="header-title">
      <div class="header-title-wrap">
        <h1>The Source.sh</h1>
        <h2>The Source.</h2>
      </div><!-- /.header-title-wrap -->
    </div><!-- /.header-title -->
  </div><!-- /.entry-header -->

  <div id="main" role="main">
    

<article class="hentry">
  



<header>
  <div class="entry-meta">
    <span class="entry-date date published updated">
      <time datetime="2014-12-22T13:40:04+10:00">
        <a href="/blog/2014/12/22/commbank-your-australian-financial-operating-system/">December 22, 2014</a>
      </time>
    </span>
    <span class="author vcard">
      <span class="fn">
        <a href="" title="About MichaelB">MichaelB</a>
      </span>
    </span>
    
      &nbsp; &bull; &nbsp;<span class="entry-comments">
        <a href="/blog/2014/12/22/commbank-your-australian-financial-operating-system/#disqus_thread">Comment</a>
      </span>
    
  </div><!-- /.entry-meta -->
  
    <h1 class="entry-title">
      <a href="/blog/2014/12/22/commbank-your-australian-financial-operating-system/" rel="bookmark" title="Commbank: Your Australian Financial Operating System" itemprop="url">Commbank: Your Australian Financial Operating System</a>
    </h1>
  
</header>

<div class="entry-content">
  <p>If you live in Australia, or are moving to Australia the best bank for the technically inclined is Commonwealth Bank (CBA). This can be a little counterintuive because CBA is not a &ldquo;challenger&rdquo; or competitive brand. Their various rates and charges tend to be on the high side relative to these challengers. However their combination of internet banking, smartphone applications, super and share trading platforms is unbeatable. Behind the scenes this is because CBA are the only bank to have successfully migrated their core systems to a modern platform.</p>

<h1>Internet Banking</h1>

<p>CBA were basically first to market with their internet banking product, Netbank. Since then they have actively invested in it to make it far more capable than other banks. Features like online only account creation and live transactions remain science fiction for the other banks. Likewise tasks like informing the bank when you are travelling overseas and ordering replacement cards can be done online, when nearly every other bank requires a phone call.</p>

<p>Oh, and because of the live transactions, you get paid a day earlier than otherwise!</p>

<h1>Smartphone Applications</h1>

<p>The Commbank app is the best on the market. Most of the features of netbank are available in a easy to use format. They are also constantly adding features, for example recently the option to temporarily lock a credit card has been added. This is great for when you have misplaced a card but want to hold off cancelling it. Their iPad apps are a bit of a disaster though. The Commsec app for trading is also really good, but the iPad version of both Commbank and Commsec are very average.</p>

<h1>Stock trading</h1>

<p>Commsec is CBA&rsquo;s trading platform and its great. Hands down the best thing is how it links to Netbank, you dont need to fill in (and fax!) heaps of forms to sign up. Also whenever you login to netbank you see your overall portfolio value.</p>

<h1>Super</h1>

<p>CBA&rsquo;s super product is not the best value, but being linked directly to Netbank makes up for that. Signing up pulls all your details from Netbank so less forms to fill out, and they provide tools to consolidate your super, and prefilled forms to give to your employer. Super is easy to forget about, which also means forgetting the outrageous admin fees they are charging if you move employers without consolidating super. A visible super balance in Netbank solves those problems.</p>

<h1>Innovations</h1>

<h2>Kaching</h2>

<p>Kaching was launched as a simple way to transfer money to friends. It has now been rolled up into the main commbank app but remains very useful. Getting BSB&rsquo;s and account numbers of friends and waiting for money to transfer sucks. Kaching lets you simply text them a code which they can enter on the CBA website, and enter the bank details themselves. Additionally if the other person has a CBA account the transfer is zero-touch and instant. As an example of when this is great, one night out a friend lost his credit card. He was able to use his phone to transfer money to me while we waited in line for the ATM, and then I withdrew cash for the week until the replacement card arrived.</p>

<h2>Cardless Cash</h2>

<p>I thought this was pretty weird when it first came out. Basically you get given a one time use code you can put in an ATM, and a pre determined amount of cash comes out. Its pretty great if you are paranoid about card skimming though. Still weird.</p>

<h2>Account Documents</h2>

<p>A small feature but quite useful. For each account you can generate CBA letterhead documents which confirm account details or balance. It&rsquo;s a good way to give someone account details for a bank transfer.</p>

  
  
</div><!-- /.entry-content -->





</article><!-- /.hentry -->

<article class="hentry">
  



<header>
  <div class="entry-meta">
    <span class="entry-date date published updated">
      <time datetime="2014-12-21T19:38:59+10:00">
        <a href="/blog/2014/12/21/simple-reporting-and-crud-with-active-admin/">December 21, 2014</a>
      </time>
    </span>
    <span class="author vcard">
      <span class="fn">
        <a href="" title="About MichaelB">MichaelB</a>
      </span>
    </span>
    
      &nbsp; &bull; &nbsp;<span class="entry-comments">
        <a href="/blog/2014/12/21/simple-reporting-and-crud-with-active-admin/#disqus_thread">Comment</a>
      </span>
    
  </div><!-- /.entry-meta -->
  
    <h1 class="entry-title">
      <a href="/blog/2014/12/21/simple-reporting-and-crud-with-active-admin/" rel="bookmark" title="Simple Reporting and CRUD With Active Admin" itemprop="url">Simple Reporting and CRUD With Active Admin</a>
    </h1>
  
</header>

<div class="entry-content">
  <p>Active Admin is the best way to build simple CRUD&rsquo;s to collect and report data. This makes it excellent for building internal applications and replacing the default internal application - Microsoft Excel.</p>

<h1>Installation</h1>

<p>Start by having <a href="https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm">installing Ruby and Rails</a></p>

<p>Create a new rails project, the rails version needs to be earlier than 4.2 as of this post.</p>

<pre><code>rails _4.1.0_ new active-admin-demo
</code></pre>

<p>Add active admin and devise (for authentication) to the Gemfile.</p>

<figure class='code'><figcaption><span>Gemfile</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="s1">&#39;activeadmin&#39;</span><span class="p">,</span> <span class="ss">github</span><span class="p">:</span> <span class="s1">&#39;activeadmin&#39;</span>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;devise&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>For 4.x you need to track the github version of active admin.</p>

<p>Run the following commands</p>

<pre><code>rails g active_admin:install   
rake db:migrate
rails s
</code></pre>

<p>Go to <a href="http://localhost:3000/admin">http://localhost:3000/admin</a> and you should see the following login page.</p>

<p><img src="/images/posts/aa/aa_1.png" alt="Alt text" /></p>

<p>Login with <a href="&#109;&#97;&#x69;&#x6c;&#x74;&#111;&#x3a;&#x61;&#100;&#109;&#105;&#x6e;&#x40;&#x65;&#120;&#x61;&#x6d;&#x70;&#x6c;&#x65;&#46;&#x63;&#111;&#x6d;">&#x61;&#x64;&#x6d;&#x69;&#x6e;&#x40;&#101;&#x78;&#97;&#x6d;&#112;&#x6c;&#101;&#x2e;&#99;&#111;&#x6d;</a> and &lsquo;password&rsquo; and you will be taken to the admin dashboard.</p>

<p><img src="/images/posts/aa/aa_2.png" alt="Alt text" /></p>

<p>So whats going on here? Starting with the url <a href="http://localhost:3000/admin/dashboard">http://localhost:3000/admin/dashboard</a> &lsquo;admin&rsquo; is the <em>namespace</em>, which maps roughly to department for most internal applications. Dashboard is the home page of any namespace. If you click on Admin Users you will be taken to a list of users. This is a <em>resource</em> and every resource has an index page like this, along with the filters on the side and the actions on the top right, in this case the only action is &ldquo;New Admin User&rdquo;.</p>

<h1>Adding Data</h1>

<p>So lets get some actual data in here. For this I will use the Chinook sqlite sample database, <a href="https://chinookdatabase.codeplex.com/downloads/get/557773.">https://chinookdatabase.codeplex.com/downloads/get/557773.</a></p>

<p>Copy this into the db folder, then add the following connection to database.yml.</p>

<figure class='code'><figcaption><span>/config/database.yml</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">data_warehouse</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="err">    </span>  <span class="l-Scalar-Plain">&lt;&lt;</span><span class="p-Indicator">:</span> <span class="nv">*default</span>
</span><span class='line'><span class="err">    </span>  <span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">db/Chinook_Sqlite.sqlite</span>
</span></code></pre></td></tr></table></div></figure>


<p>Multiple connections are not required. It could make sense to install the Active Admin tables (admin_users and comments) in the same database. Alternatively installing AA without authentication and with comments disabled requires no extra tables.</p>

<p>Create employee.rb in app/models with the following</p>

<figure class='code'><figcaption><span>/app/models/employee.rb</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Employee</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">establish_connection</span> <span class="s2">&quot;data_warehouse&quot;</span>
</span><span class='line'>  <span class="nb">self</span><span class="o">.</span><span class="n">table_name</span> <span class="o">=</span> <span class="s2">&quot;Employee&quot;</span>
</span><span class='line'>  <span class="nb">self</span><span class="o">.</span><span class="n">primary_key</span> <span class="o">=</span> <span class="s1">&#39;EmployeeId&#39;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>then go to app/admin and create another file called employee.rb</p>

<figure class='code'><figcaption><span>/app/admin/employee.rb</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">ActiveAdmin</span><span class="o">.</span><span class="n">register</span> <span class="no">Employee</span> <span class="k">do</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Restart the rails application and there should be an Employees resource in active admin.</p>

<p><img src="/images/posts/aa/aa_3.png" alt="Alt text" /></p>

<p>Straight away you get a decent looking CRUD for adminstering this table. A more common use for Active Admin is internal reporting, and this does require some customization. The reporting template I use is demonstrated below using the Employees resource.</p>

<figure class='code'><figcaption><span>/app/admin/employee.rb</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'> 
</span><span class='line'><span class="no">ActiveAdmin</span><span class="o">.</span><span class="n">register</span> <span class="no">Employee</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#remove unnesecary UI elements and name report</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">clear_action_items!</span>
</span><span class='line'>  <span class="n">actions</span> <span class="ss">:all</span><span class="p">,</span> <span class="ss">except</span><span class="p">:</span> <span class="o">[</span><span class="ss">:edit</span><span class="p">,</span> <span class="ss">:destroy</span><span class="o">]</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">batch_actions</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'>  <span class="n">menu</span> <span class="ss">:label</span> <span class="o">=&gt;</span> <span class="nb">proc</span><span class="p">{</span> <span class="s2">&quot;Employee Report&quot;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#Narrow filters to useful list</span>
</span><span class='line'>  <span class="n">filter</span> <span class="ss">:FirstName</span>
</span><span class='line'>  <span class="n">filter</span> <span class="ss">:LastName</span>
</span><span class='line'>  <span class="n">filter</span> <span class="ss">:Title</span>
</span><span class='line'>  <span class="n">filter</span> <span class="ss">:City</span>
</span><span class='line'>  <span class="n">filter</span> <span class="ss">:Email</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#common queries</span>
</span><span class='line'>  <span class="n">scope</span> <span class="ss">:all</span>
</span><span class='line'>  <span class="n">scope</span> <span class="ss">:Calgary</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
</span><span class='line'>      <span class="n">e</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;city = &#39;Calgary&#39;&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#Remove XML and JSON from download options</span>
</span><span class='line'>  <span class="n">index</span> <span class="ss">:download_links</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:csv</span><span class="o">]</span><span class="p">,</span> <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s2">&quot;Employee Report&quot;</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:FirstName</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:LastName</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Title</span>
</span><span class='line'>      <span class="c1">#Link ReportsTo to Name</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:ReportsTo</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
</span><span class='line'>          <span class="n">m</span> <span class="o">=</span> <span class="no">Employee</span><span class="o">.</span><span class="n">find_by_EmployeeId</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">ReportsTo</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span class='line'>              <span class="s2">&quot;</span><span class="si">#{</span><span class="n">m</span><span class="o">.</span><span class="n">FirstName</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">m</span><span class="o">.</span><span class="n">LastName</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>          <span class="k">else</span>
</span><span class='line'>              <span class="s2">&quot;&quot;</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:BirthDate</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="n">BirthDate</span><span class="o">.</span><span class="n">to_date</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:HireDate</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="n">BirthDate</span><span class="o">.</span><span class="n">to_date</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Address</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:City</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:PostalCode</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Phone</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Fax</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Email</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">csv</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:FirstName</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:LastName</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Title</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:ReportsTo</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
</span><span class='line'>          <span class="n">m</span> <span class="o">=</span> <span class="no">Employee</span><span class="o">.</span><span class="n">find_by_EmployeeId</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">ReportsTo</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span class='line'>              <span class="s2">&quot;</span><span class="si">#{</span><span class="n">m</span><span class="o">.</span><span class="n">FirstName</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">m</span><span class="o">.</span><span class="n">LastName</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>          <span class="k">else</span>
</span><span class='line'>              <span class="s2">&quot;&quot;</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:BirthDate</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="n">BirthDate</span><span class="o">.</span><span class="n">to_date</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:HireDate</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="n">BirthDate</span><span class="o">.</span><span class="n">to_date</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Address</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:City</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:PostalCode</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Phone</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Fax</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:Email</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/posts/aa/aa_7.png" alt="Alt text" /></p>

<h1>Other Customization and Tricks</h1>

<h2>CSV and Comments</h2>

<p>CSV downloads of reports are limited to 20,000 rows by default, which is a hassle for large reports. Additionally the comments functionality of active admin is generally not useful. This can be changed by adding this block to /config/initializers/active_admin.rb</p>

<figure class='code'><figcaption><span>/app/admin/employee.rb</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">ActiveAdmin</span><span class="o">.</span><span class="n">setup</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">site_title</span> <span class="o">=</span> <span class="s2">&quot;Reporting Portal&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#disable comments</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">allow_comments</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>      <span class="c1">#increase csv limit</span>
</span><span class='line'>  <span class="k">module</span> <span class="nn">ActiveAdmin</span>
</span><span class='line'>      <span class="k">class</span> <span class="nc">ResourceController</span> <span class="o">&lt;</span> <span class="no">BaseController</span>
</span><span class='line'>          <span class="k">module</span> <span class="nn">DataAccess</span>
</span><span class='line'>              <span class="k">def</span> <span class="nf">max_csv_records</span>
</span><span class='line'>                  <span class="mi">150_000</span>
</span><span class='line'>              <span class="k">end</span>
</span><span class='line'>              <span class="k">def</span> <span class="nf">max_per_page</span>
</span><span class='line'>                  <span class="mi">150_000</span>
</span><span class='line'>              <span class="k">end</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h2>Authentication</h2>

<p>In this example I have used the default option of Devise. Often simply disabling authentication is fine for internal apps, especially ones which are only for viewing data rather than changing it. Alternatively authentication through LDAP or Google Apps is a sensible solution for internal applications (net-ldap is a good gem for LDAP integration).</p>

<h2>Gotchas</h2>

<ul>
<li>tables need a primary key to work as active admin resources</li>
<li>active admin has had breaking API changes in the past, so relying on older blog posts does not always work. If you dont need to run the latest version of rails the older rubygems packaged version tends to have more code samples</li>
</ul>


  
  
</div><!-- /.entry-content -->





</article><!-- /.hentry -->


<div class="pagination">
  
  <a href="/archives">Blog Archives</a>
  
</div><!-- /.pagination -->

  </div><!-- /#main -->

  <div class="footer-wrapper">
    <footer role="contentinfo">
      <span>&copy; 2014 MichaelB. Powered by <a href="http://octopress.org">Octopress</a> using the <a href="https://github.com/Z1MM32M4N/hpstr-theme/">HPSTR Theme for Octopress</a>.</span>

    </footer>
  </div><!-- /.footer-wrapper -->

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/javascripts/octopress.js" type="text/javascript"></script>
<script src="/javascripts/scripts.min.js"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-57912646-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



          
  

</body>
</html>
